const o=Object.assign((...e)=>window.enmity.modules.common.React.createElement(...e),window.enmity.modules.common.React);function I(e){window.enmity.plugins.registerPlugin(e)}function D(e){return window.enmity.patcher.create(e)}const w=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native,window.enmity.modules.common.React,window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts;const y=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings;const R=window.enmity.modules.common.Users;window.enmity.modules.common.Navigation;const x=window.enmity.modules.common.NavigationNative;window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme;const S=window.enmity.modules.common.Linking,f=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale;const F=window.enmity.modules.common.Profiles;window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function p(...e){return window.enmity.modules.getByProps(...e)}window.enmity.modules.common;const{components:n}=window.enmity;n.Alert,n.Button,n.FlatList;const A=n.Image;n.ImageBackground,n.KeyboardAvoidingView,n.Modal;const k=n.Pressable;n.RefreshControl;const L=n.ScrollView;n.SectionList,n.StatusBar,n.StyleSheet,n.Switch,n.Text,n.TextInput,n.TouchableHighlight,n.TouchableOpacity,n.TouchableWithoutFeedback,n.Touchable;const _=n.View;n.VirtualizedList,n.Form,n.FormArrow,n.FormCTA,n.FormCTAButton,n.FormCardSection,n.FormCheckbox;const $=n.FormDivider;n.FormHint,n.FormIcon,n.FormInput,n.FormLabel,n.FormRadio;const B=n.FormRow,E=n.FormSection;n.FormSelect,n.FormSubLabel;const N=n.FormSwitch;n.FormTernaryCheckBox,n.FormText,n.FormTextColors,n.FormTextSizes;function c(e){const t=window.enmity.assets.getIDByName(e);if(typeof t=="undefined")throw new Error(`Asset Id by the name of '${e}' is undefined`);return t}const h={id:"doggy-dev",manifest:{name:"DoggyDev",version:"1.0.0",description:"My internal dev plugin",authors:[{name:"doggybootsy",id:"515780151791976453"}],color:"#FF0000"},invite:"yYJA3qQE5F"},s=Object.assign(h.manifest,{name:h.id}),U=h.invite,u=E,m=B,P=()=>o($),M=N,{native:a}=window.enmity;function j(){a.reload()}a.version,a.build,a.device,a.version;function V(e){R.getUser(e)?F.showUserProfile({userId:e}):window.enmity.modules.common.AsyncUsers.fetchProfile(e).then(()=>{F.showUserProfile({userId:e})})}const H=p("acceptInviteAndTransitionToInviteChannel"),{Pile:O,Text:T}=p("Pile","Text"),Y=s.name.split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join(" "),v=f.createThemedStyleSheet({name:{color:w.ThemeColorMap.HEADER_PRIMARY},version:{color:w.ThemeColorMap.HEADER_SECONDARY},scroller:{height:"100%"}}),r=32;function G(){return o(m,{label:o(o.Fragment,null,o(T,{variant:"heading-lg/semibold",style:v.name},Y),o(T,{variant:"text-md/normal",style:v.version},"v",s.version)),trailing:o(O,{size:r,gap:r/8,depthX:.5,depthY:null,shape:"circle"},s.authors.map(({name:e,id:t},i)=>o(k,{onPress:()=>{typeof t=="string"?V(t):S.openURL(`https://github.com/${e}`)},key:i},o(A,{src:`https://github.com/${e}.png`,style:{width:r,height:r,borderRadius:r}}))))})}function W(){const e=x.useNavigation();return o(u,{title:"Updater"},o(m,{label:"Attempt to update",subLabel:"Confirm both prompts to update",leading:o(m.Icon,{source:c("ic_sync_24px")}),onPress:()=>{(async function(){await window.enmity.plugins.uninstallPlugin(s.name);const t=window.doggy&&window.doggy.overrideDownload()?`http://${window.doggy.address}/${s.name}.js`:`https://raw.githubusercontent.com/doggybootsy/enmity-plugins/refs/heads/main/dist/${s.name}.js`;await window.enmity.plugins.installPlugin(`${t}?${Math.random()}`,({data:i})=>{if(e.canGoBack()?e.goBack():e.pop(),i==="installed_plugin"){y.show({title:"Installed successfully",body:"Successfully installed plugin"}),setTimeout(()=>{e.push("EnmityCustomPage",{pageName:s.name,pagePanel:window.enmity.plugins.getPlugin(s.name).getSettingsPanel})});return}if(i==="overridden_plugin"){y.show({title:"Installed successfully",body:`Successfully replaced plugin
Would you like to reload Discord?`,confirmText:"Reload",cancelText:"Later",onConfirm:j});return}y.show({title:"Installed Failed",body:"Was not able to update plugin"})})})()}}))}function z({settings:e,children:t}){const i={GitHub:c("img_account_sync_github_white"),Discord:c("Discord")};return o(_,null,o(G,null),o(L,{style:v.scroller},o(W,null),o(u,{title:"Links"},o(m,{label:"Support Server",leading:o(m.Icon,{source:i.Discord}),trailing:m.Arrow,onPress:()=>{H.acceptInviteAndTransitionToInviteChannel({inviteKey:U,context:{location:"Invite Button Embed"},callback:()=>{}})}}),o(P,null),o(m,{label:"Source",leading:o(m.Icon,{source:i.GitHub}),trailing:m.Arrow,onPress:()=>{S.openURL(`https://github.com/doggybootsy/enmity-plugins/tree/main/packages/${s.name}/`)}})),t))}function K(e){return window.enmity.settings.makeStore(e)}const g=K(s.name),q=D(s.name);function J(e){var t;typeof e=="function"&&(e=e(s));const i=b=>{typeof e[b]=="function"&&e[b]()},l={...s,commands:e.commands,patches:e.patches,onStart:()=>i("onStart"),onStop:()=>i("onStop"),getSettingsPanel:void 0},d=(t=e.SettingsPanel)!=null?t:e.SettingsPanel=()=>null;l.getSettingsPanel=()=>o(z,{settings:g},o(d,{settings:g})),I(l),l.doggy={manifest:s,settings:g,patcher:q},i("onLoad")}const C={address:"10.0.0.170:9091",overrideDownload:()=>g.getBoolean("override-download",!0)},{Text:Q}=p("TextStyleSheet","Text");window.doggy=C;async function X(e){window.enmity.plugins.getPlugin(e)&&await window.enmity.plugins.uninstallPlugin("friends-since"),window.enmity.plugins.installPlugin(`http://${C.address}/${e}.js`)}const Z={plugins:[{name:"doggy-dev",version:"1.0.0",description:"My internal dev plugin",authors:[{name:"doggybootsy",id:"515780151791976453"}],color:"#FF0000"},{name:"friends-since",version:"1.0.0",description:"Shows how long you have been friends for",authors:[{name:"doggybootsy",id:"515780151791976453"}]},{name:"silent-typing",version:"1.0.0",description:"Silences your typing indicator.",authors:[{name:"eternal",id:"263689920210534400"}]}]},ee=f.createThemedStyleSheet({version:{color:w.ThemeColorMap.HEADER_SECONDARY}});J({SettingsPanel({settings:e}){return o(o.Fragment,null,o(u,{title:"Settings"},o(m,{label:"Override Download URL",subLabel:`When this is disabled it will use github
This may break updating when disabled`,trailing:o(M,{value:e.getBoolean("override-download",!0),onValueChange:()=>e.toggle("override-download",!0)})})),o(u,{title:"Install Plugins"},Z.plugins.map((t,i,l)=>o(o.Fragment,{key:i},o(m,{label:t.name.split("-").map(d=>d[0].toUpperCase()+d.slice(1)).join(" "),subLabel:t.description,leading:o(m.Icon,{source:c("ic_activity_24px")}),disabled:t.name==="doggy-dev",trailing:o(Q,{style:ee.version},"v",t.version),onPress:()=>{X(t.name)}}),i!==l.length-1&&o(P,null)))))}});
