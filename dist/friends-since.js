const o=Object.assign((...e)=>window.enmity.modules.common.React.createElement(...e),window.enmity.modules.common.React);function V(e){window.enmity.plugins.registerPlugin(e)}function O(e){return window.enmity.patcher.create(e)}const _=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const U=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts;const v=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings;const G=window.enmity.modules.common.Users;window.enmity.modules.common.Navigation;const R=window.enmity.modules.common.NavigationNative;window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme;const E=window.enmity.modules.common.Linking,F=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components;const j=window.enmity.modules.common.Locale,k=window.enmity.modules.common.Profiles;window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger;const x=window.enmity.modules.common.Flux;window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function D(...e){return window.enmity.modules.getByProps(...e)}function H(...e){return window.enmity.modules.getByName(...e)}window.enmity.modules.common;const{components:t}=window.enmity;t.Alert;const h=t.Button;t.FlatList;const A=t.Image;t.ImageBackground;const W=t.KeyboardAvoidingView;t.Modal;const Y=t.Pressable;t.RefreshControl;const z=t.ScrollView;t.SectionList,t.StatusBar,t.StyleSheet,t.Switch,t.Text,t.TextInput,t.TouchableHighlight,t.TouchableOpacity,t.TouchableWithoutFeedback,t.Touchable;const d=t.View;t.VirtualizedList,t.Form,t.FormArrow,t.FormCTA,t.FormCTAButton,t.FormCardSection,t.FormCheckbox;const K=t.FormDivider;t.FormHint,t.FormIcon,t.FormInput,t.FormLabel,t.FormRadio;const J=t.FormRow,q=t.FormSection;t.FormSelect,t.FormSubLabel;const Q=t.FormSwitch;t.FormTernaryCheckBox,t.FormText,t.FormTextColors,t.FormTextSizes;function f(e){const n=window.enmity.assets.getIDByName(e);if(typeof n=="undefined")throw new Error(`Asset Id by the name of '${e}' is undefined`);return n}const w={id:"friends-since",manifest:{name:"FriendsSince",version:"1.0.0",description:"Shows how long you have been friends for",authors:[{name:"doggybootsy",id:"515780151791976453"}]},invite:"yYJA3qQE5F",git:{url:"https://github.com/doggybootsy/enmity-plugins",branch:"main"},IS_PROD:!0},r=Object.assign(w.manifest,{name:w.id}),X=w.invite,S=w.git;w.IS_PROD;const P=q,a=J,Z=()=>o(K),ee=Q,{native:g}=window.enmity;function N(){g.reload()}g.version,g.build,g.device,g.version;const{Children:Fe,Component:b,Fragment:Pe,Profiler:Ie,PureComponent:Te,StrictMode:Ce,Suspense:_e,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Re,cloneElement:Ee,createContext:ke,createElement:oe,createFactory:xe,createRef:De,forwardRef:Ae,isValidElement:te,lazy:Ne,memo:Le,startTransition:$e,useCallback:Be,useContext:Me,useDebugValue:Ve,useDeferredValue:Oe,useEffect:Ue,useId:Ge,useImperativeHandle:je,useInsertionEffect:He,useLayoutEffect:We,useMemo:Ye,useReducer:ze,useRef:Ke,useState:ne,useSyncExternalStore:Je,useTransition:qe,version:Qe}=U,{Pile:ie,Text:c}=D("Pile","Text"),se=F.ThemeColorMap;function re(e){return F.createThemedStyleSheet(e)}function le(e){G.getUser(e)?k.showUserProfile({userId:e}):window.enmity.modules.common.AsyncUsers.fetchProfile(e).then(()=>{k.showUserProfile({userId:e})})}function L(e,n){Object.defineProperty(e,"super_",{value:n,writable:!0,configurable:!0}),Object.setPrototypeOf(e.prototype,n.prototype)}const $=(()=>{function e(n,i){b.call(this,n,i),this.state={hasError:!1}}return e.prototype.componentDidCatch=function(n,i){this.setState({hasError:!0,error:n,info:i})},e.prototype.render=function(){return this.state.hasError?typeof this.props.fallback=="function"?o(this.props.fallback,{error:this.state.error,info:this.state.info,self:this}):this.props.fallback:this.props.children},e.defaultProps={fallback:o(c,{style:{color:"red"}},"React Error")},L(e,b),e.wrap=function(n){function i(s,l){b.call(this,s,l)}return i.prototype.render=function(){return oe(n,this.props)},L(i,b),i},e.displayName="DoggyBootsy(ErrorBoundary)",e})();function ae(e){return x.Store.getAll().find(n=>n.getName()===e)}const ce=x.useStateFromStores,me=D("acceptInviteAndTransitionToInviteChannel"),de=r.name.split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join(" "),p=F.createThemedStyleSheet({name:{color:_.ThemeColorMap.HEADER_PRIMARY},version:{color:_.ThemeColorMap.HEADER_SECONDARY},scroller:{flexGrow:1,flexShrink:1},info:{flexGrow:0,flexShrink:0},view:{height:"100%",display:"flex",flexDirection:"column",gap:0}}),y=32;function ue(){return o(a,{style:p.info,label:o(o.Fragment,null,o(c,{variant:"heading-lg/semibold",style:p.name},de),o(c,{variant:"text-md/normal",style:p.version},"v",r.version)),trailing:o(ie,{size:y,gap:y/8,depthX:.5,depthY:null,shape:"circle"},r.authors.map(({name:e,id:n},i)=>o(Y,{onPress:()=>{typeof n=="string"?le(n):E.openURL(`https://github.com/${e}`)},key:i},o(A,{src:`https://github.com/${e}.png`,style:{width:y,height:y,borderRadius:y}}))))})}function we(){const e=R.useNavigation();return o(P,{title:"Updater"},o(a,{label:"Attempt to update",subLabel:"Confirm both prompts to update",leading:o(a.Icon,{source:f("ic_sync_24px")}),onPress:()=>{(async function(){await window.enmity.plugins.uninstallPlugin(r.name),e.canGoBack()?e.goBack():e.pop();const[n,i]=S.url.split("/").slice(-2),s=`https://raw.githubusercontent.com/${n}/${i}/refs/heads/${S.branch}/dist/${r.name}.js`;await window.enmity.plugins.installPlugin(`${s}?__random__${Math.random().toString(36).slice(2)}`,({data:l})=>{if(l==="installed_plugin"){v.show({title:"Installed successfully",body:"Successfully installed plugin"}),setTimeout(()=>{e.push("EnmityCustomPage",{pageName:r.name,pagePanel:window.enmity.plugins.getPlugin(r.name).getSettingsPanel})},10);return}if(l==="overridden_plugin"){v.show({title:"Installed successfully",body:`Successfully replaced plugin
Would you like to reload Discord?`,confirmText:"Reload",cancelText:"Later",onConfirm:N});return}v.show({title:"Installed Failed",body:"Was not able to update plugin"})})})()}}))}function ge({error:e,info:n,self:i}){const s=R.useNavigation(),[l,m]=ne(!1);return o(d,{style:{borderWidth:2,padding:8,margin:8,borderColor:"red",borderRadius:8}},o(c,{style:{color:"red"}},"React Error"),o(d,null,o(c,null,e.message)),o(h,{title:"View Complete Error Info",onPress:()=>m(M=>!M)}),l&&(e.stack||n.componentStack||n.digest)&&o(d,null,e.stack&&o(c,null,e.stack),n.digest&&o(c,null,n.digest),n.componentStack&&o(c,null,n.componentStack)),o(h,{title:"Attempt Recovery",onPress:()=>i.setState({hasError:!1})}),o(h,{title:"Exit Settings",onPress:()=>{s.canGoBack()?s.goBack():s.pop()}}),o(h,{title:"Reload",onPress:()=>N()}))}function pe({settings:e,children:n}){const i={GitHub:f("img_account_sync_github_white"),Discord:f("Discord")};return o(d,{style:p.view},o(ue,null),o(z,{style:p.scroller},o(W,{enabled:!0,behavior:"position",contentContainerStyle:{backfaceVisibility:"hidden"}},o(we,null),o(P,{title:"Links"},o(a,{label:"Support Server",leading:o(a.Icon,{source:i.Discord}),trailing:a.Arrow,onPress:()=>{me.acceptInviteAndTransitionToInviteChannel({inviteKey:X,context:{location:"Invite Button Embed"},callback:()=>{}})}}),o(Z,null),o(a,{label:"Source",leading:o(a.Icon,{source:i.GitHub}),trailing:a.Arrow,onPress:()=>{const[s,l]=S.url.split("/").slice(-2);E.openURL(`https://github.com/${s}/${l}/tree/${S.branch}/packages/${r.name}/`)}})),o($,{fallback:ge},n),o(d,{style:{height:50}}))))}function ye(e){return window.enmity.settings.makeStore(e)}const u=ye(r.name),I=O(r.name);let B=!1;function he(e){var n;if(B)throw new Error("Plugin has already been implemented!");B=!0,typeof e=="function"&&(e=e());const i=m=>{typeof e[m]=="function"&&e[m]()};(!r.color||r.color==="random")&&(r.color=`#${Math.floor(Math.random()*(16777215+1)).toString(16)}`);const s={...r,commands:e.commands,patches:e.patches,onStart:i.bind(null,"onStart"),onStop(){i("onStop"),I.unpatchAll()},getSettingsPanel:void 0},l=(n=e.SettingsPanel)!=null?n:e.SettingsPanel=()=>null;s.getSettingsPanel=()=>o(pe,{settings:u},o(l,{settings:u})),V(s),s.$$_doggy_$$={manifest:r,settings:u,patcher:I},i("onLoad")}const T=ae("RelationshipStore");function fe(e,n){if(e==null||e==="")return null;const i=new Date(e);return!(i instanceof Date)||isNaN(i.getTime())?null:i.toLocaleDateString(n,{month:"short",day:"numeric",year:"numeric"})}const C=re({header:{marginBottom:8},text:{flexDirection:"row",flexWrap:"wrap",columnGap:6},icon:{height:16,width:16,tintColor:se.INTERACTIVE_NORMAL}}),Se=H("SimplifiedUserProfileAboutMeCard",{default:!1}),be=f("ic_friend_wave_24px"),ve=$.wrap(function({userId:e}){const n=ce([T],()=>{const i=T.getSince(e);return i&&T.isFriend(e)?fe(i,j.getLocale()):null});if(n)return o(d,null,o(c,{color:"header-secondary",style:C.header,variant:"text-sm/semibold"},"Friends Since"),o(d,{style:C.text},u.getBoolean("add-icon",!0)&&o(A,{source:be,style:C.icon}),o(c,null,n)))});he({onStart(){I.after(Se,"default",(e,[{userId:n}],i)=>{const s=i.props.children;let l=s.findIndex(m=>te(m)&&typeof m.type=="function"&&m.type.name==="MemberJoinDates");~l||(l=s.length),s.splice(l+1,0,o(ve,{userId:n}))})},SettingsPanel(){return o(P,{title:"Settings"},o(a,{label:"Add Icon",trailing:o(ee,{value:u.getBoolean("add-icon",!0),onValueChange:e=>u.set("add-icon",e)})}))}});
