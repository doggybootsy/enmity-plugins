const o=Object.assign((...e)=>window.enmity.modules.common.React.createElement(...e),window.enmity.modules.common.React);function C(e){window.enmity.plugins.registerPlugin(e)}function x(e){return window.enmity.patcher.create(e)}const b=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const _=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts;const u=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings;const D=window.enmity.modules.common.Users;window.enmity.modules.common.Navigation;const E=window.enmity.modules.common.NavigationNative;window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme;const v=window.enmity.modules.common.Linking,L=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components;const A=window.enmity.modules.common.Locale,F=window.enmity.modules.common.Profiles;window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger;const T=window.enmity.modules.common.Flux;window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function w(...e){return window.enmity.modules.getByProps(...e)}function N(...e){return window.enmity.modules.getByTypeName(...e)}function k(...e){return window.enmity.modules.getByName(...e)}window.enmity.modules.common;const{components:n}=window.enmity;n.Alert,n.Button,n.FlatList;const B=n.Image;n.ImageBackground,n.KeyboardAvoidingView,n.Modal;const U=n.Pressable;n.RefreshControl;const $=n.ScrollView;n.SectionList,n.StatusBar,n.StyleSheet,n.Switch,n.Text,n.TextInput,n.TouchableHighlight,n.TouchableOpacity,n.TouchableWithoutFeedback,n.Touchable;const P=n.View;n.VirtualizedList,n.Form,n.FormArrow,n.FormCTA,n.FormCTAButton,n.FormCardSection,n.FormCheckbox;const M=n.FormDivider;n.FormHint,n.FormIcon,n.FormInput,n.FormLabel,n.FormRadio;const V=n.FormRow,O=n.FormSection;n.FormSelect,n.FormSubLabel,n.FormSwitch,n.FormTernaryCheckBox,n.FormText,n.FormTextColors,n.FormTextSizes;function g(e){const t=window.enmity.assets.getIDByName(e);if(typeof t=="undefined")throw new Error(`Asset Id by the name of '${e}' is undefined`);return t}const y={id:"friends-since",manifest:{name:"FriendsSince",version:"1.0.0",description:"Shows how long you have been friends for",authors:[{name:"doggybootsy",id:"515780151791976453"}]},invite:"yYJA3qQE5F"},s=Object.assign(y.manifest,{name:y.id}),H=y.invite,I=O,m=V,j=()=>o(M),{native:a}=window.enmity;function Y(){a.reload()}a.version,a.build,a.device,a.version;function z(e){D.getUser(e)?F.showUserProfile({userId:e}):window.enmity.modules.common.AsyncUsers.fetchProfile(e).then(()=>{F.showUserProfile({userId:e})})}const G=w("acceptInviteAndTransitionToInviteChannel"),{Pile:W,Text:R}=w("Pile","Text"),K=s.name.split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join(" "),p=L.createThemedStyleSheet({name:{color:b.ThemeColorMap.HEADER_PRIMARY},version:{color:b.ThemeColorMap.HEADER_SECONDARY},scroller:{height:"100%"}}),c=32;function q(){return o(m,{label:o(o.Fragment,null,o(R,{variant:"heading-lg/semibold",style:p.name},K),o(R,{variant:"text-md/normal",style:p.version},"v",s.version)),trailing:o(W,{size:c,gap:c/8,depthX:.5,depthY:null,shape:"circle"},s.authors.map(({name:e,id:t},i)=>o(U,{onPress:()=>{typeof t=="string"?z(t):v.openURL(`https://github.com/${e}`)},key:i},o(B,{src:`https://github.com/${e}.png`,style:{width:c,height:c,borderRadius:c}}))))})}function J(){const e=E.useNavigation();return o(I,{title:"Updater"},o(m,{label:"Attempt to update",subLabel:"Confirm both prompts to update",leading:o(m.Icon,{source:g("ic_sync_24px")}),onPress:()=>{(async function(){await window.enmity.plugins.uninstallPlugin(s.name);const t=window.doggy&&window.doggy.overrideDownload()?`http://${window.doggy.address}/${s.name}.js`:`https://raw.githubusercontent.com/doggybootsy/enmity-plugins/refs/heads/main/dist/${s.name}.js`;await window.enmity.plugins.installPlugin(`${t}?${Math.random()}`,({data:i})=>{if(e.canGoBack()?e.goBack():e.pop(),i==="installed_plugin"){u.show({title:"Installed successfully",body:"Successfully installed plugin"}),setTimeout(()=>{e.push("EnmityCustomPage",{pageName:s.name,pagePanel:window.enmity.plugins.getPlugin(s.name).getSettingsPanel})});return}if(i==="overridden_plugin"){u.show({title:"Installed successfully",body:`Successfully replaced plugin
Would you like to reload Discord?`,confirmText:"Reload",cancelText:"Later",onConfirm:Y});return}u.show({title:"Installed Failed",body:"Was not able to update plugin"})})})()}}))}function Q({settings:e,children:t}){const i={GitHub:g("img_account_sync_github_white"),Discord:g("Discord")};return o(P,null,o(q,null),o($,{style:p.scroller},o(J,null),o(I,{title:"Links"},o(m,{label:"Support Server",leading:o(m.Icon,{source:i.Discord}),trailing:m.Arrow,onPress:()=>{G.acceptInviteAndTransitionToInviteChannel({inviteKey:H,context:{location:"Invite Button Embed"},callback:()=>{}})}}),o(j,null),o(m,{label:"Source",leading:o(m.Icon,{source:i.GitHub}),trailing:m.Arrow,onPress:()=>{v.openURL(`https://github.com/doggybootsy/enmity-plugins/tree/main/packages/${s.name}/`)}})),t))}function X(e){return window.enmity.settings.makeStore(e)}const h=X(s.name),f=x(s.name);function Z(e){var t;typeof e=="function"&&(e=e(s));const i=l=>{typeof e[l]=="function"&&e[l]()},r={...s,commands:e.commands,patches:e.patches,onStart:()=>i("onStart"),onStop:()=>i("onStop"),getSettingsPanel:void 0},d=(t=e.SettingsPanel)!=null?t:e.SettingsPanel=()=>null;r.getSettingsPanel=()=>o(Q,{settings:h},o(d,{settings:h})),C(r),r.doggy={manifest:s,settings:h,patcher:f},i("onLoad")}const{Children:re,Component:le,Fragment:ae,Profiler:ce,PureComponent:de,StrictMode:ue,Suspense:we,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:ge,cloneElement:ye,createContext:pe,createElement:he,createFactory:fe,createRef:Se,forwardRef:be,isValidElement:ee,lazy:ve,memo:Fe,startTransition:Te,useCallback:Pe,useContext:Ie,useDebugValue:Re,useDeferredValue:Ce,useEffect:xe,useId:_e,useImperativeHandle:De,useInsertionEffect:Ee,useLayoutEffect:Le,useMemo:Ae,useReducer:Ne,useRef:ke,useState:Be,useSyncExternalStore:Ue,useTransition:$e,version:Me}=_,ne=k("UserProfileSection"),{Text:oe}=w("TextStyleSheet","Text");function te(e){return T.Store.getAll().find(t=>t.getName()===e)}const S=te("RelationshipStore");function ie(e,t){if(e==null||e==="")return null;const i=new Date(e);return!(i instanceof Date)||isNaN(i.getTime())?null:i.toLocaleDateString(t,{month:"short",day:"numeric",year:"numeric"})}function se({userId:e}){const t=T.useStateFromStores([S],()=>{const i=S.getSince(e);return i&&S.isFriend(e)?ie(i,A.getLocale()):null});if(t)return o(ne,{title:"Friends Since"},o(P,{style:{display:"flex",flexDirection:"row",alignItems:"center"}},o(oe,{variant:"text-md/normal",style:{marginRight:8}},t)))}const me=N("UserProfileContent");Z({onStart(){f.after(me,"type",(e,[{user:t}],i)=>{try{const r=i.props.children[1].props.children[1].props.children[3].props.children.props.children,d=r.findIndex(l=>ee(l)&&l.props.user&&"channel"in l.props);if(!~d)return;r.splice(d+1,0,o(se,{userId:t.id}))}catch{}finally{return i}})},onStop(){f.unpatchAll()}});
